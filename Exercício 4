# ======= M칍DULOS =======

# M칩dulo Rastreavel (para personagens rastre치veis)
module Rastreavel
  attr_accessor :localizacao

  def obter_localizacao(hora)
    "Localiza칞칚o de #{self.class}: #{@localizacao} 맙 #{hora}"
  end
end

# M칩dulo Perigoso (para criminosos)
module Perigoso
  def calcular_risco
    rand(5..10) # risco aleat칩rio entre 5 e 10
  end
end

# ======= CLASSES =======

# Classe base
class Participante
  attr_accessor :nome

  def initialize(nome)
    @nome = nome
  end

  def to_s
    "#{@nome} (#{self.class})"
  end
end

# Detetive - rastre치vel
class Detetive < Participante
  include Rastreavel

  def initialize(nome, localizacao)
    super(nome)
    @localizacao = localizacao
  end
end

# Mestre do Crime - rastre치vel e perigoso
class MestreDoCrime < Participante
  include Rastreavel
  include Perigoso

  def initialize(nome, localizacao)
    super(nome)
    @localizacao = localizacao
  end
end

# ======= CLASSE CEN츼RIO =======
class Cenario
  def initialize
    @participantes = []
  end

  def adicionar_participante(p)
    @participantes << p
  end

  def listar_rastreaveis
    @participantes.select { |p| p.respond_to?(:obter_localizacao) }
  end

  def identificar_ameacas
    @participantes.select { |p| p.respond_to?(:calcular_risco) }
  end
end

#main
puts "=== Jogo das Sombras ==="
print "Localiza칞칚o de Sherlock: "
local_sherlock = gets.chomp
print "Localiza칞칚o de Moriarty: "
local_moriarty = gets.chomp

# Cria os participantes
sherlock = Detetive.new("Sherlock Holmes", local_sherlock)
moriarty = MestreDoCrime.new("Professor Moriarty", local_moriarty)

# Cria o cen치rio e adiciona
cenario = Cenario.new
cenario.adicionar_participante(sherlock)
cenario.adicionar_participante(moriarty)

# Lista rastre치veis
puts "\n游댌 Rastre치veis no cen치rio:"
cenario.listar_rastreaveis.each do |r|
  puts r.obter_localizacao("22:00")
end

# Identifica amea칞as
puts "\n丘멆잺 Amea칞as detectadas:"
cenario.identificar_ameacas.each do |a|
  puts "#{a.nome} 칠 perigoso! N칤vel de risco: #{a.calcular_risco}"
end
